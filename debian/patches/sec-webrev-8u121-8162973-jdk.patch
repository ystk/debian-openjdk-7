# HG changeset patch
# User mcherkas
# Date 1475154409 -10800
#      Thu Sep 29 16:06:49 2016 +0300
# Node ID 70fe02b90e71a61fc03998c17cdd487f47ea67b8
# Parent  6060afebe7d02a2f0c260c056bd9ada17549a8cf
8162973: Better component components
Reviewed-by: ssadetsky, prr, ahgross

--- openjdk/jdk/src/windows/native/sun/windows/awt_Component.cpp.orig
+++ openjdk/jdk/src/windows/native/sun/windows/awt_Component.cpp
@@ -98,7 +98,6 @@ BOOL AwtComponent::sm_restoreFocusAndAct
 HWND AwtComponent::sm_focusOwner = NULL;
 HWND AwtComponent::sm_focusedWindow = NULL;
 BOOL AwtComponent::sm_bMenuLoop = FALSE;
-AwtComponent* AwtComponent::sm_getComponentCache = NULL;
 BOOL AwtComponent::sm_inSynthesizeFocus = FALSE;
 
 /************************************************************************/
@@ -272,10 +271,6 @@ AwtComponent::~AwtComponent()
      * handle.
      */
     DestroyHWnd();
-
-    if (sm_getComponentCache == this) {
-        sm_getComponentCache = NULL;
-    }
 }
 
 void AwtComponent::Dispose()
@@ -348,9 +343,6 @@ AwtComponent* AwtComponent::GetComponent
     if (hWnd == AwtToolkit::GetInstance().GetHWnd()) {
         return NULL;
     }
-    if (sm_getComponentCache && sm_getComponentCache->GetHWnd() == hWnd) {
-        return sm_getComponentCache;
-    }
 
     // check that it's an AWT component from the same toolkit as the caller
     if (::IsWindow(hWnd) &&
@@ -358,7 +350,7 @@ AwtComponent* AwtComponent::GetComponent
     {
         DASSERT(WmAwtIsComponent != 0);
         if (::SendMessage(hWnd, WmAwtIsComponent, 0, 0L)) {
-            return sm_getComponentCache = GetComponentImpl(hWnd);
+            return GetComponentImpl(hWnd);
         }
     }
     return NULL;
